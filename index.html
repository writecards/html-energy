<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="cloud.png" />
    <link rel="stylesheet" href="style.css" />
    <title>HTML Day 2025 Shanghai</title>
  </head>
  <body>
    <div class="big-parent">
      <div class="description-text">
        <h3>HTML Day 2025 Shanghai</h3>
        <div class="question">
          <p><strong>这是什么？</strong></p>
          <p>一年一度的在公园里一起写网页的活动</p>
        </div>
        <div class="question">
          <p><strong>我需要带什么？</strong></p>
          <p>充满电的电脑，和适合在草坪上的东西</p>
        </div>
        <div class="question">
          <p><strong>什么时候发生？</strong></p>
          <p>2025年8月1日，下午4点30分</p>
        </div>
        <div class="question">
          <p><strong>具体在哪里?</strong></p>
          <p>详细地址在微信群里公布</p>
        </div>

        <div class="question">
          <p><strong>谁在举办这次活动？</strong></p>
          <p><a href="https://www.instagram.com/rect_repair/">[[rect**]]repair</a> & shengli</p>
        </div>
        <div class="question">
          <p><strong>怎么报名?</strong></p>
          <p>[[[报名方式]]</p>
        </div>
        <div class="question">
          <p><strong>我不在上海，我的城市有活动吗？</strong></p>

          <p>
            看看
            <a href="https://html.energy/events.html">html energy 活动网站</a>.
            如果你所在的城市不在, 欢迎组织自己的活动!
          </p>
        </div>

        <div class="question">
          <p><strong>What should I bring?</strong></p>
          <p>a charged computer, friends, and good energy</p>
        </div>

        <div class="question">
          <p><strong>Where exactly?</strong></p>
          <p>specific location announced in wechat group</p>
        </div>
        <div class="question">
          <p><strong>Who is running this?</strong></p>
          <p><a href="https://www.instagram.com/rect_repair/">[[rect**]]repair</a> & shengli</p>
        </div>
        <div class="question">
          <p><strong>How do I sign up?</strong></p>
          <p>[[[sign up method]]]</p>
        </div>

        <div class="question">
          <p>
            <strong>I'm not in Shanghai, is there an event in my city?</strong>
          </p>
          <p>
            check out the
            <a href="https://html.energy/events.html">html energy events page</a
            >. If your city isn't listed, feel free to organize your own!
          </p>
        </div>
      </div>

      <div class="flowers">
        <pre>
          
        </pre>
      </div>

      <!-- sign up section? we need to store their info and update the grid  -->
      <div style="position: absolute; left: 65%; top: 5%; transform: translateX(-50%); display: flex; align-items: center; justify-content: center;">
        <p style="margin-right: 10px;"> Join the park:</p>
        <input type="text" id="nameInput" placeholder="Enter your name" style="padding: 5px; margin-right: 10px; border-radius: 0; border-width: 1px; height: 25px; box-sizing: border-box;">
        <button onclick="addNameToGrid()" style="padding: 5pxpx; border-radius: 0; border-width: 1px; height: 25px; box-sizing: border-box;">我确定会来</button>
      </div>

      <div class="picnic-grid">
        <div class="box" id="div1">中山公园 Zhongshan Park</div>
        <div class="box" id="div2"></div>
        <div class="box" id="div3"></div>
        <div class="box" id="div4"></div>
        <div class="box" id="div5"></div>
        <div class="box" id="div6"></div>
        <div class="box" id="div7">
          <p class="boxtext">August 1, 2025 16:30-19:00 (tentative)</p>
        </div>
        <div class="box" id="div8"></div>
        <div class="box" id="div9"></div>
        <div class="box" id="div10">
          <p class="boxtext">yuemin</p>
        </div>
        <div class="box" id="div11">
          <p class="boxtext"></p>
        </div>
        <div class="box" id="div12"></div>
        <div class="box" id="div13"></div>
        <div class="box" id="div14"></div>
        <div class="box" id="div15"></div>
        <div class="box" id="div16"></div>
        <div class="box" id="div17">
          <p class="boxtext">shengli</p>
        </div>
        <div class="box" id="div18"></div>
        <div class="box" id="div19">
          <p class="boxtext">joanna</p>
        </div>
        <div class="box" id="div20"></div>
      </div>
    </div>
    
    <script>
      function addNameToGrid() {
        const nameInput = document.getElementById('nameInput');
        const name = nameInput.value.trim();
        
        if (name === '') {
          alert('无名氏？');
          return;
        }
        // Get all divs in the picnic grid
        const gridDivs = document.querySelectorAll('.picnic-grid .box');
        
        // Find empty divs (divs with no text content or only whitespace)
        const emptyDivs = Array.from(gridDivs).filter(div => {
          const textContent = div.textContent.trim();
          return textContent === '';
        });
        if (emptyDivs.length === 0) {
          alert('来晚了，但也许你可以直接当天过来');
          return;
        }
        // Pick a random empty div
        const randomIndex = Math.floor(Math.random() * emptyDivs.length);
        const selectedDiv = emptyDivs[randomIndex];
        
        // Add the name to the selected div
        selectedDiv.innerHTML = `<p class="boxtext">${name}</p>`;
        
        // Clear the input field
        nameInput.value = '';
        
        // Update the flowers to match the number of people
        updateFlowers();
        
        // Optional: Show a success message
        alert(`${name} 进入了公园!`);
      }
      
      function updateFlowers() {
        // Count how many people are in the grid
        const gridDivs = document.querySelectorAll('.picnic-grid .box');
        const peopleCount = Array.from(gridDivs).filter(div => {
          const textContent = div.textContent.trim();
          return textContent !== '';
        }).length;
        
        // Get the flowers element
        const flowersElement = document.querySelector('.flowers pre');
        
        // Create ASCII flowers based on the count
        let flowers = '';
        const flowerLines = [
          'wWWWw',
          'vVVVv',
          '(___)',
          ' ~Y~ ',
          ' \|/ ',
          '\\|//'
        ];
        
        // Create horizontal layout
        for (let lineIndex = 0; lineIndex < flowerLines.length; lineIndex++) {
          let line = '';
          for (let i = 0; i < peopleCount; i++) {
            line += flowerLines[lineIndex] + '   ';
          }
          flowers += line + '\n';
        }
        
        // Update the flowers display
        flowersElement.textContent = flowers;
      }
      
      // Initialize flowers on page load
      window.addEventListener('load', updateFlowers);
    </script>
  </body>
</html>
